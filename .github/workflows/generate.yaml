name: Generate Hosts
on: [push, workflow_dispatch]

jobs:
    generate_host:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v4
            - name: Install Dependencies
              run: |
                sudo apt-get install -y jq dnsutils
            - name: Generate Hosts
              run: ./Cealing-Gen.sh
            - name: Create Release
              uses: softprops/action-gh-release@v2
              with:
                files: Cealing-Host.json
                tag_name: ${{ github.run_id }}
                name: Cealing-Host-${{ github.run_id }}
                body: |
                  Cealing-Hosts generated by Cealing-Host-Generator (Run ID: ${{ github.run_id }})
